{
  "version": 3,
  "sources": ["package-manager.ts"],
  "sourcesContent": ["import * as os from 'os';\nimport * as path from 'path';\n\ninterface PackageManagerProps {\n  readonly lockFile: string;\n  readonly installCommand: string[];\n  readonly runCommand: string[];\n  readonly argsSeparator?: string\n}\n\n/**\n * A node package manager\n */\nexport class PackageManager {\n  public static NPM = new PackageManager({\n    lockFile: 'package-lock.json',\n    installCommand: ['npm', 'ci'],\n    runCommand: ['npx', '--no-install'],\n  });\n\n  public static YARN = new PackageManager({\n    lockFile: 'yarn.lock',\n    installCommand: ['yarn', 'install', '--no-immutable'],\n    runCommand: ['yarn', 'run'],\n  });\n\n  public static PNPM = new PackageManager({\n    lockFile: 'pnpm-lock.yaml',\n    installCommand: ['pnpm', 'install'],\n    runCommand: ['pnpm', 'exec'],\n    argsSeparator: '--',\n  });\n\n  public static fromLockFile(lockFilePath: string): PackageManager {\n    const lockFile = path.basename(lockFilePath);\n\n    switch (lockFile) {\n      case PackageManager.NPM.lockFile:\n        return PackageManager.NPM;\n      case PackageManager.YARN.lockFile:\n        return PackageManager.YARN;\n      case PackageManager.PNPM.lockFile:\n        return PackageManager.PNPM;\n      default:\n        return PackageManager.NPM;\n    }\n  }\n\n  public readonly lockFile: string;\n  public readonly installCommand: string[];\n  public readonly runCommand: string[];\n  public readonly argsSeparator?: string;\n\n  constructor(props: PackageManagerProps) {\n    this.lockFile = props.lockFile;\n    this.installCommand = props.installCommand;\n    this.runCommand = props.runCommand;\n    this.argsSeparator = props.argsSeparator;\n  }\n\n  public runBinCommand(bin: string): string {\n    const [runCommand, ...runArgs] = this.runCommand;\n    return [\n      os.platform() === 'win32' ? `${runCommand}.cmd` : runCommand,\n      ...runArgs,\n      ...(this.argsSeparator ? [this.argsSeparator] : []),\n      bin,\n    ].join(' ');\n  }\n}\n"],
  "mappings": "kGAAA,KAAA,IAAA,QAAA,MACA,KAAA,QAAA,QAYA,oBAA2B,CAwCzB,YAAY,MAA0B,CACpC,KAAK,SAAW,MAAM,SACtB,KAAK,eAAiB,MAAM,eAC5B,KAAK,WAAa,MAAM,WACxB,KAAK,cAAgB,MAAM,oBAxBf,cAAa,aAAoB,CAG7C,OAFiB,KAAK,SAAS,mBAGxB,gBAAe,IAAI,SACtB,MAAO,gBAAe,QACnB,gBAAe,KAAK,SACvB,MAAO,gBAAe,SACnB,gBAAe,KAAK,SACvB,MAAO,gBAAe,aAEtB,MAAO,gBAAe,KAgBrB,cAAc,IAAW,CAC9B,KAAM,CAAC,cAAe,SAAW,KAAK,WACtC,MAAO,CACL,GAAG,aAAe,QAAU,GAAG,iBAAmB,WAClD,GAAG,QACH,GAAI,KAAK,cAAgB,CAAC,KAAK,eAAiB,GAChD,KACA,KAAK,MAtDX,QAAA,eAAA,eACgB,eAAA,IAAM,GAAI,gBAAe,CACrC,SAAU,oBACV,eAAgB,CAAC,MAAO,MACxB,WAAY,CAAC,MAAO,kBAGR,eAAA,KAAO,GAAI,gBAAe,CACtC,SAAU,YACV,eAAgB,CAAC,OAAQ,UAAW,kBACpC,WAAY,CAAC,OAAQ,SAGT,eAAA,KAAO,GAAI,gBAAe,CACtC,SAAU,iBACV,eAAgB,CAAC,OAAQ,WACzB,WAAY,CAAC,OAAQ,QACrB,cAAe",
  "names": []
}
